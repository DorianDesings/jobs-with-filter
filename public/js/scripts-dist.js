const main=document.getElementById("main"),filter=document.getElementById("filter"),tagsInFilter=[],drawCardsInDOM=t=>{const a=document.createDocumentFragment();for(cardData of t){const t=document.createElement("div");t.classList.add("card"),t.dataset.languages=cardData.languages;const e=document.createElement("div");e.classList.add("card__header");const d=document.createElement("img");d.classList.add("card__img"),d.src=cardData.logo;const n=document.createElement("h2");if(n.classList.add("card__title"),n.textContent=cardData.company,e.appendChild(d),e.appendChild(n),cardData.new){const t=document.createElement("span");t.classList.add("card__label"),t.textContent="NEW",e.appendChild(t)}if(cardData.featured){const t=document.createElement("span");t.classList.add("card__label","card__label--black"),t.textContent="FEATURED",e.appendChild(t)}t.appendChild(e),a.appendChild(t);const c=document.createElement("div");c.classList.add("card__body");const s=document.createElement("p");s.classList.add("card__position"),s.textContent=cardData.position;const o=document.createElement("div");o.classList.add("card__info");let l=document.createElement("span");l.classList.add("card__job-info"),l.textContent=cardData.postedAt,o.appendChild(l),l=document.createElement("span"),l.classList.add("card__job-info"),l.textContent=cardData.contract,o.appendChild(l),l=document.createElement("span"),l.classList.add("card__job-info"),l.textContent=cardData.location,o.appendChild(l),c.appendChild(s),c.appendChild(o),t.appendChild(c);const i=document.createElement("div");for(language of(i.classList.add("card__footer"),cardData.languages)){const t=document.createElement("span");t.classList.add("tag"),t.textContent=language,i.appendChild(t)}t.appendChild(i)}main.appendChild(a)},getData=async()=>{try{const t=await fetch("./data/data.json"),a=await t.json();drawCardsInDOM(a)}catch(t){console.log("ERROR",t)}};getData();const createTag=t=>{const a=document.createDocumentFragment(),e=document.createElement("div");e.classList.add("tag","tag--with-close");const d=document.createElement("div");d.classList.add("tag__title"),d.textContent=t;const n=document.createElement("img");n.classList.add("tag__close"),n.src="./assets/images/icon-remove.svg",e.appendChild(d),e.appendChild(n),a.appendChild(e),filter.appendChild(a)},checkCards=()=>{const t=[...document.querySelectorAll(".card")];for(card of(t.forEach((t=>t.classList.add("card--hide"))),t)){const t=card.dataset.languages.split(",");tagsInFilter.every((a=>t.includes(a)))&&card.classList.remove("card--hide")}};main.addEventListener("click",(t=>{if(t.target.classList.contains("tag")){void 0===tagsInFilter.find((a=>t.target.textContent===a))&&(tagsInFilter.push(t.target.textContent.trim()),createTag(t.target.textContent),checkCards())}}));