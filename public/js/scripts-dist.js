const main=document.getElementById("main"),filter=document.getElementById("filter");let tagsInFilter=[];const drawCardsInDOM=t=>{const e=document.createDocumentFragment();for(cardData of t){const t=document.createElement("div");t.classList.add("card"),t.dataset.languages=cardData.languages;const a=document.createElement("div");a.classList.add("card__header");const n=document.createElement("img");n.classList.add("card__img"),n.src=cardData.logo;const d=document.createElement("h2");if(d.classList.add("card__title"),d.textContent=cardData.company,a.appendChild(n),a.appendChild(d),cardData.new){const t=document.createElement("span");t.classList.add("card__label"),t.textContent="NEW",a.appendChild(t)}if(cardData.featured){const t=document.createElement("span");t.classList.add("card__label","card__label--black"),t.textContent="FEATURED",a.appendChild(t)}t.appendChild(a),e.appendChild(t);const c=document.createElement("div");c.classList.add("card__body");const s=document.createElement("p");s.classList.add("card__position"),s.textContent=cardData.position;const l=document.createElement("div");l.classList.add("card__info");let o=document.createElement("span");o.classList.add("card__job-info"),o.textContent=cardData.postedAt,l.appendChild(o),o=document.createElement("span"),o.classList.add("card__job-info"),o.textContent=cardData.contract,l.appendChild(o),o=document.createElement("span"),o.classList.add("card__job-info"),o.textContent=cardData.location,l.appendChild(o),c.appendChild(s),c.appendChild(l),t.appendChild(c);const r=document.createElement("div");for(language of(r.classList.add("card__footer"),cardData.languages)){const t=document.createElement("span");t.classList.add("tag"),t.textContent=language,r.appendChild(t)}t.appendChild(r)}main.appendChild(e)},getData=async()=>{try{const t=await fetch("./data/data.json"),e=await t.json();drawCardsInDOM(e)}catch(t){console.log("ERROR",t)}};getData();const createTag=t=>{const e=document.createDocumentFragment(),a=document.createElement("div");a.classList.add("tag","tag--with-close");const n=document.createElement("div");n.classList.add("tag__title"),n.textContent=t;const d=document.createElement("img");d.classList.add("tag__close"),d.src="./assets/images/icon-remove.svg",a.appendChild(n),a.appendChild(d),e.appendChild(a),filter.appendChild(e)},checkCards=()=>{const t=[...document.querySelectorAll(".card")];for(card of(t.forEach((t=>t.classList.add("card--hide"))),t)){const t=card.dataset.languages.split(",");tagsInFilter.every((e=>t.includes(e)))&&card.classList.remove("card--hide")}},removeTags=()=>{[...document.querySelectorAll(".tag--with-close")].forEach((t=>t.remove()))};main.addEventListener("click",(t=>{if(t.target.classList.contains("tag")){void 0===tagsInFilter.find((e=>t.target.textContent===e))&&(tagsInFilter.push(t.target.textContent.trim()),createTag(t.target.textContent),checkCards())}})),filter.addEventListener("click",(t=>{t.target.classList.contains("filter__clear")?(tagsInFilter.length=0,[...document.querySelectorAll(".tag--with-close")].forEach((t=>t.remove()))):t.target.classList.contains("tag__close")&&(t.target.parentElement.remove(),tagsInFilter=tagsInFilter.filter((e=>e!==t.target.parentElement.textContent))),checkCards()}));